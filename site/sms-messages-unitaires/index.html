<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Cyrille Georgel < cyrille.georgel@encom-conseil.fr >">
  <link rel="canonical" href="https://encom-conseil.github.io/sms-messages-unitaires/">
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Messages unitaires - API Clients Encom</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Messages unitaires";
    var mkdocs_page_input_path = "sms-messages-unitaires.md";
    var mkdocs_page_url = "/sms-messages-unitaires/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> API Clients Encom</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">API SMS</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../encom-api-sms/">Introduction</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Messages unitaires</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#envoyer-un-message-unitaire">Envoyer un message unitaire</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#parametres">Paramètres</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#exemples-de-requete">Exemples de requête</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#curl">Curl</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#php">PHP</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#python">Python</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#exemple-de-reponse">Exemple de réponse</a>
    </li>
        </ul>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../sms-messages-listes/">Messages vers une liste de diffusion</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../sms-listes-de-diffusion/">Listes de diffusion</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../sms-destinataires/">Gestion des destinataires</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../sms-listener/">Configuration de listener</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">API Clients Encom</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>API SMS &raquo;</li>
        
      
    
    <li>Messages unitaires</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="messages-unitaires">Messages unitaires</h2>
<h3 id="envoyer-un-message-unitaire">Envoyer un message unitaire</h3>
<p><strong>POST /api/v1/sms/singleMessage</strong></p>
<h4 id="parametres">Paramètres</h4>
<ul>
<li>customerAccount * : compte client Encom</li>
<li>recipient * : numéro de téléphone du destinataire</li>
<li>message * : texte du message</li>
<li>type * : type du message, 't' pour 'transactionnel' ou 'm' pour marketing</li>
<li>idSend: campagne d'envoi (facultatif)</li>
<li>listener: url recevant la notification de résultat du message (facultatif)</li>
</ul>
<p>Note : le paramètre 'customerAccount', qui correspond au compte client Encom, doit être passé dans toutes les requêtes vers l'API Clients Encom. En effet, le jeton d'identification est personnel et son détenteur peut dans certains cas avoir accès à plusieurs comptes clients.</p>
<h4 id="exemples-de-requete">Exemples de requête</h4>
<h5 id="curl">Curl</h5>
<pre><code>curl --request POST \
  --url 'https://telecom0525-clients.bluerocktel.net/api/v1/sms/singleMessage?customerAccount=CL3578&amp;recipient=0603790931&amp;message=Hello%20World!&amp;type=t&amp;=' \
  --header 'authorization: Bearer {token} '
</code></pre>

<h5 id="php">PHP</h5>
<pre><code>&lt;?php

$curl = curl_init();

curl_setopt_array($curl, array(
  CURLOPT_URL =&gt; &quot;https://telecom0525-clients.bluerocktel.net/api/v1/sms/singleMessage?customerAccount=CL3578&amp;recipient=0603790931&amp;message=Hello%20World!&amp;type=t&amp;=&quot;,
  CURLOPT_RETURNTRANSFER =&gt; true,
  CURLOPT_ENCODING =&gt; &quot;&quot;,
  CURLOPT_MAXREDIRS =&gt; 10,
  CURLOPT_TIMEOUT =&gt; 30,
  CURLOPT_HTTP_VERSION =&gt; CURL_HTTP_VERSION_1_1,
  CURLOPT_CUSTOMREQUEST =&gt; &quot;POST&quot;,
  CURLOPT_POSTFIELDS =&gt; &quot;&quot;,
  CURLOPT_HTTPHEADER =&gt; array(
    &quot;authorization: Bearer {token} &quot;
  ),
));

$response = curl_exec($curl);
$err = curl_error($curl);

curl_close($curl);

if ($err) {
  echo &quot;cURL Error #:&quot; . $err;
} else {
  echo $response;
}
</code></pre>

<h5 id="python">Python</h5>
<pre><code>import http.client

conn = http.client.HTTPSConnection(&quot;telecom0525-clients.bluerocktel.net&quot;)

payload = &quot;&quot;

headers = { 'authorization': &quot;Bearer {token} &quot; }

conn.request(&quot;POST&quot;, &quot;/api/v1/sms/singleMessage?customerAccount=CL3578&amp;recipient=0603790931&amp;message=Hello%20World!&amp;type=t&amp;=&quot;, payload, headers)

res = conn.getresponse()
data = res.read()

print(data.decode(&quot;utf-8&quot;))
</code></pre>

<h4 id="exemple-de-reponse">Exemple de réponse</h4>
<p>Lorsque le message est planifié avec succès, l'API retourne un code "201 Created" ainsi que l'id du message :</p>
<pre><code>{
  &quot;store&quot;: 20
}
</code></pre>
              
            </div>
          </div>
          
<footer>
    
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        
        <a href="../sms-messages-listes/" class="btn btn-neutral float-right" title="Messages vers une liste de diffusion">Next <span class="icon icon-circle-arrow-right"></span></a>
        
        
        <a href="../encom-api-sms/" class="btn btn-neutral" title="Introduction"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        
    </div>
    

    <hr/>

    <div role="contentinfo">
        <!-- Copyright etc -->
        
    </div>

    Built with Passion at <a href="https://encom-conseil.fr?utm_source=api-clients-documentation" target="_blank">Encom</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../encom-api-sms/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../sms-messages-listes/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
